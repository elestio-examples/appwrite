ports:
  - protocol: "HTTPS"
    targetProtocol: "HTTP"
    listeningPort: "443"
    targetPort: "8080"
    targetIP: "172.17.0.1"
    public: true
    path: "/"
    isAuth: false
    login: ""
    password: ""
environments:
  - key: "SOFTWARE_VERSION_TAG"
    value: "latest"
  - key: "ADMIN_EMAIL"
    value: "[EMAIL]"
  - key: "ADMIN_PASSWORD"
    value: "random_password"
  - key: "_APP_ENV"
    value: "production"
  - key: "_APP_LOCALE"
    value: "en"
  - key: "_APP_CONSOLE_WHITELIST_ROOT"
    value: "enabled"
  - key: "_APP_CONSOLE_WHITELIST_EMAILS"
    value: ""
  - key: "_APP_CONSOLE_WHITELIST_IPS"
    value: ""
  - key: "_APP_SYSTEM_EMAIL_NAME"
    value: "Appwrite"
  - key: "_APP_SYSTEM_EMAIL_ADDRESS"
    value: "team@appwrite.io"
  - key: "_APP_SYSTEM_SECURITY_EMAIL_ADDRESS"
    value: "security@appwrite.io"
  - key: "_APP_SYSTEM_RESPONSE_FORMAT"
    value: ""
  - key: "_APP_OPTIONS_ABUSE"
    value: "disabled"
  - key: "_APP_OPTIONS_FORCE_HTTPS"
    value: "disabled"
  - key: "_APP_OPENSSL_KEY_V1"
    value: "dc804827d4283038a5967e0568f866f2"
  - key: "_APP_DOMAIN"
    value: "[CI_CD_DOMAIN]"
  - key: "_APP_DOMAIN_TARGET"
    value: "[CI_CD_DOMAIN]"
  - key: "_APP_REDIS_HOST"
    value: "redis"
  - key: "_APP_REDIS_PORT"
    value: "6379"
  - key: "_APP_DB_ROOT_PASS"
    value: "random_password"
  - key: "_APP_DB_HOST"
    value: "mariadb"
  - key: "_APP_DB_PORT"
    value: "3306"
  - key: "_APP_DB_SCHEMA"
    value: "appwrite"
  - key: "_APP_DB_USER"
    value: "appwritte_user"
  - key: "_APP_DB_PASS"
    value: "random_password"
  - key: "_APP_STORAGE_ANTIVIRUS"
    value: "disabled"
  - key: "_APP_INFLUXDB_HOST"
    value: "influxdb"
  - key: "_APP_INFLUXDB_PORT"
    value: "8086"
  - key: "_APP_STATSD_HOST"
    value: "telegraf"
  - key: "_APP_STATSD_PORT"
    value: "8125"
  - key: "_APP_SMTP_HOST"
    value: "172.17.0.1"
  - key: "_APP_SMTP_PORT"
    value: "25"
  - key: "_APP_SMTP_SECURE"
    value: ""
  - key: "_APP_SMTP_USERNAME"
    value: ""
  - key: "_APP_SMTP_PASSWORD"
    value: ""
  - key: "_APP_STORAGE_LIMIT"
    value: "10000000"
  - key: "_APP_FUNCTIONS_TIMEOUT"
    value: "900"
  - key: "_APP_FUNCTIONS_CONTAINERS"
    value: "10"
  - key: "_APP_FUNCTIONS_CPUS"
    value: "1"
  - key: "_APP_FUNCTIONS_MEMORY"
    value: "256"
  - key: "_APP_FUNCTIONS_MEMORY_SWAP"
    value: "256"
  - key: "_APP_MAINTENANCE_INTERVAL"
    value: "86400"
  - key: "_APP_MAINTENANCE_RETENTION_EXECUTION"
    value: "1209600"
  - key: "_APP_MAINTENANCE_RETENTION_ABUSE"
    value: "86400"
  - key: "_APP_MAINTENANCE_RETENTION_AUDIT"
    value: "1209600"
  - key: "_APP_USAGE_STATS"
    value: "enabled"
  - key: "_APP_EXECUTOR_RUNTIME_NETWORK"
    value: "[PIPELINE_NAME]_runtimes"
  - key: "OPEN_RUNTIMES_NETWORK"
    value: "[PIPELINE_NAME]_runtimes"

config:
  runTime: "dockerCompose"
  version: ""
  framework: ""
  buildCommand: "docker-compose build"
  buildDir: "/"
  runCommand: "docker-compose up -d"
  icon: ""
  screenshot: "appwrite.png"
lifeCycleConfig:
  preInstallCommand: "./scripts/preInstall.sh"
  postInstallCommand: "./scripts/postInstall.sh"
  preBackupCommand: "./scripts/preBackup.sh"
  postBackupCommand: "./scripts/postBackup.sh"
  preRestoreCommand: "./scripts/preRestore.sh"
  postRestoreCommand: "./scripts/postRestore.sh"
  postDeployCommand: "./scripts/postDeploy.sh"
  postUpdateCommand:  "./scripts/postUpdate.sh"
webUI:
  - url: "https://[CI_CD_DOMAIN]/"
    label: "Appwrite Web UI"
    login: "[ADMIN_EMAIL]"
    password: "[ADMIN_PASSWORD]"
